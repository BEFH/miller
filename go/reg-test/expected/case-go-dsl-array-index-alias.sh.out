
mlr --from ./reg-test/input/s.dkvp --idkvp --opprint put $z = [$a,$b,$i,$x,$y][1]
a   b   i x                   y                   z
pan pan 1 0.3467901443380824  0.7268028627434533  pan
eks pan 2 0.7586799647899636  0.5221511083334797  eks
wye wye 3 0.20460330576630303 0.33831852551664776 wye
eks wye 4 0.38139939387114097 0.13418874328430463 eks

mlr --from ./reg-test/input/s.dkvp --idkvp --opprint put $z = [$a,$b,$i,$x,$y][-1]
a   b   i x                   y                   z
pan pan 1 0.3467901443380824  0.7268028627434533  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463 0.13418874328430463

mlr --from ./reg-test/input/s.dkvp --idkvp --opprint put $z = [$a,$b,$i,$x,$y][NR]
a   b   i x                   y                   z
pan pan 1 0.3467901443380824  0.7268028627434533  pan
eks pan 2 0.7586799647899636  0.5221511083334797  pan
wye wye 3 0.20460330576630303 0.33831852551664776 3
eks wye 4 0.38139939387114097 0.13418874328430463 0.38139939387114097

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $up   = $[NR]
a   b   i x                   y                   up
pan pan 1 0.3467901443380824  0.7268028627434533  pan
eks pan 2 0.7586799647899636  0.5221511083334797  pan
wye wye 3 0.20460330576630303 0.33831852551664776 3
eks wye 4 0.38139939387114097 0.13418874328430463 0.38139939387114097
wye pan 5 0.5732889198020006  0.8636244699032729  0.8636244699032729

a   b   i x                  y
zee pan 6 0.5271261600918548 0.49322128674835697
eks zee 7 0.6117840605678454 0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $down = $[-NR]
a   b   i x                   y                   down
pan pan 1 0.3467901443380824  0.7268028627434533  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797  0.7586799647899636
wye wye 3 0.20460330576630303 0.33831852551664776 3
eks wye 4 0.38139939387114097 0.13418874328430463 wye
wye pan 5 0.5732889198020006  0.8636244699032729  wye

a   b   i x                  y
zee pan 6 0.5271261600918548 0.49322128674835697
eks zee 7 0.6117840605678454 0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $up   = $*[NR]
a   b   i x                   y                   up
pan pan 1 0.3467901443380824  0.7268028627434533  pan
eks pan 2 0.7586799647899636  0.5221511083334797  pan
wye wye 3 0.20460330576630303 0.33831852551664776 3
eks wye 4 0.38139939387114097 0.13418874328430463 0.38139939387114097
wye pan 5 0.5732889198020006  0.8636244699032729  0.8636244699032729

a   b   i x                  y
zee pan 6 0.5271261600918548 0.49322128674835697
eks zee 7 0.6117840605678454 0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $down = $*[-NR]
a   b   i x                   y                   down
pan pan 1 0.3467901443380824  0.7268028627434533  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797  0.7586799647899636
wye wye 3 0.20460330576630303 0.33831852551664776 3
eks wye 4 0.38139939387114097 0.13418874328430463 wye
wye pan 5 0.5732889198020006  0.8636244699032729  wye

a   b   i x                  y
zee pan 6 0.5271261600918548 0.49322128674835697
eks zee 7 0.6117840605678454 0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $[1] = "new"
a   b   i x                   y
new pan 1 0.3467901443380824  0.7268028627434533
new pan 2 0.7586799647899636  0.5221511083334797
new wye 3 0.20460330576630303 0.33831852551664776
new wye 4 0.38139939387114097 0.13418874328430463
new pan 5 0.5732889198020006  0.8636244699032729
new pan 6 0.5271261600918548  0.49322128674835697
new zee 7 0.6117840605678454  0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $[2] = "new"
a   b   i x                   y
pan new 1 0.3467901443380824  0.7268028627434533
eks new 2 0.7586799647899636  0.5221511083334797
wye new 3 0.20460330576630303 0.33831852551664776
eks new 4 0.38139939387114097 0.13418874328430463
wye new 5 0.5732889198020006  0.8636244699032729
zee new 6 0.5271261600918548  0.49322128674835697
eks new 7 0.6117840605678454  0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $[5] = "new"
a   b   i x                   y
pan pan 1 0.3467901443380824  new
eks pan 2 0.7586799647899636  new
wye wye 3 0.20460330576630303 new
eks wye 4 0.38139939387114097 new
wye pan 5 0.5732889198020006  new
zee pan 6 0.5271261600918548  new
eks zee 7 0.6117840605678454  new

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $[-1] = "new"
a   b   i x                   y
pan pan 1 0.3467901443380824  new
eks pan 2 0.7586799647899636  new
wye wye 3 0.20460330576630303 new
eks wye 4 0.38139939387114097 new
wye pan 5 0.5732889198020006  new
zee pan 6 0.5271261600918548  new
eks zee 7 0.6117840605678454  new

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $[-2] = "new"
a   b   i x   y
pan pan 1 new 0.7268028627434533
eks pan 2 new 0.5221511083334797
wye wye 3 new 0.33831852551664776
eks wye 4 new 0.13418874328430463
wye pan 5 new 0.8636244699032729
zee pan 6 new 0.49322128674835697
eks zee 7 new 0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $[-5] = "new"
a   b   i x                   y
new pan 1 0.3467901443380824  0.7268028627434533
new pan 2 0.7586799647899636  0.5221511083334797
new wye 3 0.20460330576630303 0.33831852551664776
new wye 4 0.38139939387114097 0.13418874328430463
new pan 5 0.5732889198020006  0.8636244699032729
new pan 6 0.5271261600918548  0.49322128674835697
new zee 7 0.6117840605678454  0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put @idx = NR % 5; @idx = @idx == 0 ? 5 : @idx; $[@idx] = "NEW"
a   b   i   x                   y
NEW pan 1   0.3467901443380824  0.7268028627434533
eks NEW 2   0.7586799647899636  0.5221511083334797
wye wye NEW 0.20460330576630303 0.33831852551664776
eks wye 4   NEW                 0.13418874328430463
wye pan 5   0.5732889198020006  NEW
NEW pan 6   0.5271261600918548  0.49322128674835697
eks NEW 7   0.6117840605678454  0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $*[1] = "new"
a   b   i x                   y
new pan 1 0.3467901443380824  0.7268028627434533
new pan 2 0.7586799647899636  0.5221511083334797
new wye 3 0.20460330576630303 0.33831852551664776
new wye 4 0.38139939387114097 0.13418874328430463
new pan 5 0.5732889198020006  0.8636244699032729
new pan 6 0.5271261600918548  0.49322128674835697
new zee 7 0.6117840605678454  0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $*[2] = "new"
a   b   i x                   y
pan new 1 0.3467901443380824  0.7268028627434533
eks new 2 0.7586799647899636  0.5221511083334797
wye new 3 0.20460330576630303 0.33831852551664776
eks new 4 0.38139939387114097 0.13418874328430463
wye new 5 0.5732889198020006  0.8636244699032729
zee new 6 0.5271261600918548  0.49322128674835697
eks new 7 0.6117840605678454  0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $*[5] = "new"
a   b   i x                   y
pan pan 1 0.3467901443380824  new
eks pan 2 0.7586799647899636  new
wye wye 3 0.20460330576630303 new
eks wye 4 0.38139939387114097 new
wye pan 5 0.5732889198020006  new
zee pan 6 0.5271261600918548  new
eks zee 7 0.6117840605678454  new

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $*[-1] = "new"
a   b   i x                   y
pan pan 1 0.3467901443380824  new
eks pan 2 0.7586799647899636  new
wye wye 3 0.20460330576630303 new
eks wye 4 0.38139939387114097 new
wye pan 5 0.5732889198020006  new
zee pan 6 0.5271261600918548  new
eks zee 7 0.6117840605678454  new

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $*[-2] = "new"
a   b   i x   y
pan pan 1 new 0.7268028627434533
eks pan 2 new 0.5221511083334797
wye wye 3 new 0.33831852551664776
eks wye 4 new 0.13418874328430463
wye pan 5 new 0.8636244699032729
zee pan 6 new 0.49322128674835697
eks zee 7 new 0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put $*[-5] = "new"
a   b   i x                   y
new pan 1 0.3467901443380824  0.7268028627434533
new pan 2 0.7586799647899636  0.5221511083334797
new wye 3 0.20460330576630303 0.33831852551664776
new wye 4 0.38139939387114097 0.13418874328430463
new pan 5 0.5732889198020006  0.8636244699032729
new pan 6 0.5271261600918548  0.49322128674835697
new zee 7 0.6117840605678454  0.1878849191181694

mlr --opprint --from ./reg-test/input/s.dkvp --from ./reg-test/input/t.dkvp put @idx = NR % 5; @idx = @idx == 0 ? 5 : @idx; $*[@idx] = "NEW"
a   b   i   x                   y
NEW pan 1   0.3467901443380824  0.7268028627434533
eks NEW 2   0.7586799647899636  0.5221511083334797
wye wye NEW 0.20460330576630303 0.33831852551664776
eks wye 4   NEW                 0.13418874328430463
wye pan 5   0.5732889198020006  NEW
NEW pan 6   0.5271261600918548  0.49322128674835697
eks NEW 7   0.6117840605678454  0.1878849191181694

