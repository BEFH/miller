
mlr --from ./reg-test/input/abixy-het put -q o = mapsum(); dump o
{}
{}
{}
{}
{}
{}
{}
{}
{}
{}

mlr --from ./reg-test/input/abixy-het put -q o = mapdiff(); dump o
{}
{}
{}
{}
{}
{}
{}
{}
{}
{}

mlr --from ./reg-test/input/abixy-het put -q o = mapexcept(); dump o
Miller: couldn't assign variable var o from value error (error)

mlr --from ./reg-test/input/abixy-het put -q o = mapselect(); dump o
Miller: couldn't assign variable var o from value error (error)

mlr --from ./reg-test/input/abixy-het put -q o = mapsum($*); dump o
{
  "a": "pan",
  "b": "pan",
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "a": "eks",
  "b": "pan",
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "aaa": "wye",
  "b": "wye",
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776
}
{
  "a": "eks",
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463
}
{
  "a": "wye",
  "b": "pan",
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "a": "zee",
  "b": "pan",
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "a": "eks",
  "b": "zee",
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "a": "zee",
  "b": "wye",
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059
}
{
  "a": "pan",
  "b": "wye",
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapsum({"a":999}); dump o
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}

mlr --from ./reg-test/input/abixy-het put -q o = mapdiff($*); dump o
{
  "a": "pan",
  "b": "pan",
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "a": "eks",
  "b": "pan",
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "aaa": "wye",
  "b": "wye",
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776
}
{
  "a": "eks",
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463
}
{
  "a": "wye",
  "b": "pan",
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "a": "zee",
  "b": "pan",
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "a": "eks",
  "b": "zee",
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "a": "zee",
  "b": "wye",
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059
}
{
  "a": "pan",
  "b": "wye",
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapdiff({"a":999}); dump o
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}

mlr --from ./reg-test/input/abixy-het put -q o = mapexcept($*); dump o
{
  "a": "pan",
  "b": "pan",
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "a": "eks",
  "b": "pan",
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "aaa": "wye",
  "b": "wye",
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776
}
{
  "a": "eks",
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463
}
{
  "a": "wye",
  "b": "pan",
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "a": "zee",
  "b": "pan",
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "a": "eks",
  "b": "zee",
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "a": "zee",
  "b": "wye",
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059
}
{
  "a": "pan",
  "b": "wye",
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapexcept({"a":999}); dump o
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}

mlr --from ./reg-test/input/abixy-het put -q o = mapselect($*); dump o
{}
{}
{}
{}
{}
{}
{}
{}
{}
{}

mlr --from ./reg-test/input/abixy-het put -q o = mapselect({"a":999}); dump o
{}
{}
{}
{}
{}
{}
{}
{}
{}
{}

mlr --from ./reg-test/input/abixy-het put -q o = mapsum($*, {"a":999}); dump o
{
  "a": 999,
  "b": "pan",
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "a": 999,
  "b": "pan",
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "aaa": "wye",
  "b": "wye",
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776,
  "a": 999
}
{
  "a": 999,
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463
}
{
  "a": 999,
  "b": "pan",
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "a": 999,
  "b": "pan",
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "a": 999,
  "b": "zee",
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "a": 999,
  "b": "wye",
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059,
  "a": 999
}
{
  "a": 999,
  "b": "wye",
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapsum({"a":999}, $*); dump o
{
  "a": "pan",
  "b": "pan",
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "a": "eks",
  "b": "pan",
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "a": 999,
  "aaa": "wye",
  "b": "wye",
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776
}
{
  "a": "eks",
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463
}
{
  "a": "wye",
  "b": "pan",
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "a": "zee",
  "b": "pan",
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "a": "eks",
  "b": "zee",
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "a": "zee",
  "b": "wye",
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "a": 999,
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059
}
{
  "a": "pan",
  "b": "wye",
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapdiff($*, {"a":999}); dump o
{
  "b": "pan",
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "b": "pan",
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "aaa": "wye",
  "b": "wye",
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776
}
{
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463
}
{
  "b": "pan",
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "b": "pan",
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "b": "zee",
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "b": "wye",
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059
}
{
  "b": "wye",
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapdiff({"a":999}, $*); dump o
{}
{}
{
  "a": 999
}
{}
{}
{}
{}
{}
{
  "a": 999
}
{}

mlr --from ./reg-test/input/abixy-het put -q o = mapexcept($*, "a"); dump o
{
  "b": "pan",
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "b": "pan",
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "aaa": "wye",
  "b": "wye",
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776
}
{
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463
}
{
  "b": "pan",
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "b": "pan",
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "b": "zee",
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "b": "wye",
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059
}
{
  "b": "wye",
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapexcept({"a":999}, "a"); dump o
{}
{}
{}
{}
{}
{}
{}
{}
{}
{}

mlr --from ./reg-test/input/abixy-het put -q o = mapexcept({"a":999}, "nonesuch"); dump o
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}

mlr --from ./reg-test/input/abixy-het put -q o = mapselect($*, "a"); dump o
{
  "a": "pan"
}
{
  "a": "eks"
}
{}
{
  "a": "eks"
}
{
  "a": "wye"
}
{
  "a": "zee"
}
{
  "a": "eks"
}
{
  "a": "zee"
}
{}
{
  "a": "pan"
}

mlr --from ./reg-test/input/abixy-het put -q o = mapselect({"a":999}, "a"); dump o
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}
{
  "a": 999
}

mlr --from ./reg-test/input/abixy-het put -q o = mapselect({"a":999}, "nonesuch"); dump o
{}
{}
{}
{}
{}
{}
{}
{}
{}
{}

mlr --from ./reg-test/input/abixy-het put -q o = mapsum($*, {"a":999}, {"b": 444}); dump o
{
  "a": 999,
  "b": 444,
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "a": 999,
  "b": 444,
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "aaa": "wye",
  "b": 444,
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776,
  "a": 999
}
{
  "a": 999,
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463,
  "b": 444
}
{
  "a": 999,
  "b": 444,
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "a": 999,
  "b": 444,
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "a": 999,
  "b": 444,
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "a": 999,
  "b": 444,
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059,
  "a": 999,
  "b": 444
}
{
  "a": 999,
  "b": 444,
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapsum({"a":999}, $*, {"b": 444}); dump o
{
  "a": "pan",
  "b": 444,
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "a": "eks",
  "b": 444,
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "a": 999,
  "aaa": "wye",
  "b": 444,
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776
}
{
  "a": "eks",
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463,
  "b": 444
}
{
  "a": "wye",
  "b": 444,
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "a": "zee",
  "b": 444,
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "a": "eks",
  "b": 444,
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "a": "zee",
  "b": 444,
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "a": 999,
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059,
  "b": 444
}
{
  "a": "pan",
  "b": 444,
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapdiff($*, {"a":999}, {"b": 444}); dump o
{
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "aaa": "wye",
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776
}
{
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463
}
{
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059
}
{
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapdiff({"a":999}, $*, {"b": 444}); dump o
{}
{}
{
  "a": 999
}
{}
{}
{}
{}
{}
{
  "a": 999
}
{}

mlr --from ./reg-test/input/abixy-het put -q o = mapexcept($*, "a", "b"); dump o
{
  "i": 1,
  "x": 0.3467901443380824,
  "y": 0.7268028627434533
}
{
  "i": 2,
  "x": 0.7586799647899636,
  "y": 0.5221511083334797
}
{
  "aaa": "wye",
  "i": 3,
  "x": 0.20460330576630303,
  "y": 0.33831852551664776
}
{
  "bbb": "wye",
  "i": 4,
  "x": 0.38139939387114097,
  "y": 0.13418874328430463
}
{
  "i": 5,
  "xxx": 0.5732889198020006,
  "y": 0.8636244699032729
}
{
  "i": 6,
  "x": 0.5271261600918548,
  "y": 0.49322128674835697
}
{
  "iii": 7,
  "x": 0.6117840605678454,
  "y": 0.1878849191181694
}
{
  "i": 8,
  "x": 0.5985540091064224,
  "yyy": 0.976181385699006
}
{
  "aaa": "hat",
  "bbb": "wye",
  "i": 9,
  "x": 0.03144187646093577,
  "y": 0.7495507603507059
}
{
  "i": 10,
  "x": 0.5026260055412137,
  "y": 0.9526183602969864
}

mlr --from ./reg-test/input/abixy-het put -q o = mapselect({"a":999}, "b", "nonesuch"); dump o
{}
{}
{}
{}
{}
{}
{}
{}
{}
{}

mlr --from ./reg-test/input/abixy-het put -q o = mapselect($*, "a", "b"); dump o
{
  "a": "pan",
  "b": "pan"
}
{
  "a": "eks",
  "b": "pan"
}
{
  "b": "wye"
}
{
  "a": "eks"
}
{
  "a": "wye",
  "b": "pan"
}
{
  "a": "zee",
  "b": "pan"
}
{
  "a": "eks",
  "b": "zee"
}
{
  "a": "zee",
  "b": "wye"
}
{}
{
  "a": "pan",
  "b": "wye"
}

mlr --from ./reg-test/input/abixy-het put -q o = mapselect({"a":999}, "b", "nonesuch"); dump o
{}
{}
{}
{}
{}
{}
{}
{}
{}
{}

