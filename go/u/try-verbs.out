
----------------------------------------------------------------
mlr --opprint cat u/s.dkvp
a   b   i x                   y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint cat -n u/s.dkvp
n a   b   i x                   y
1 pan pan 1 0.3467901443380824  0.7268028627434533
2 eks pan 2 0.7586799647899636  0.5221511083334797
3 wye wye 3 0.20460330576630303 0.33831852551664776
4 eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint cat -n -g a u/s.dkvp
n a   b   i x                   y
1 pan pan 1 0.3467901443380824  0.7268028627434533
1 eks pan 2 0.7586799647899636  0.5221511083334797
1 wye wye 3 0.20460330576630303 0.33831852551664776
2 eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint cat -n -g a,b u/s.dkvp
n a   b   i x                   y
1 pan pan 1 0.3467901443380824  0.7268028627434533
1 eks pan 2 0.7586799647899636  0.5221511083334797
1 wye wye 3 0.20460330576630303 0.33831852551664776
1 eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint cut -f x,a u/s.dkvp
a   x
pan 0.3467901443380824
eks 0.7586799647899636
wye 0.20460330576630303
eks 0.38139939387114097

----------------------------------------------------------------
mlr --opprint cut -o -f x,a u/s.dkvp
x                   a
0.3467901443380824  pan
0.7586799647899636  eks
0.20460330576630303 wye
0.38139939387114097 eks

----------------------------------------------------------------
mlr --opprint cut -x -f x,a u/s.dkvp
b   i y
pan 1 0.7268028627434533
pan 2 0.5221511083334797
wye 3 0.33831852551664776
wye 4 0.13418874328430463

----------------------------------------------------------------
mlr --opprint head -n 1 u/s.dkvp
a   b   i x                  y
pan pan 1 0.3467901443380824 0.7268028627434533

----------------------------------------------------------------
mlr --opprint head -n 1 -g a u/s.dkvp
a   b   i x                   y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776

----------------------------------------------------------------
mlr --opprint head -n 1 -g a,b u/s.dkvp
a   b   i x                   y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint tail -n 1 u/medium.dkvp
a   b   i  x                   y
pan hat 40 0.30302850095892986 0.2884018711352886

----------------------------------------------------------------
mlr --opprint tail -n 1 -g a u/medium.dkvp
a   b   i  x                    y
pan hat 40 0.30302850095892986  0.2884018711352886
eks pan 31 0.5701563454882129   0.822178550628332
wye pan 37 0.056537252420374995 0.5450112991603523
zee zee 35 0.12565828887119346  0.1936186210637818
hat pan 39 0.4591095934684415   0.6526252088703994

----------------------------------------------------------------
mlr --opprint tail -n 1 -g a,b u/medium.dkvp
a   b   i  x                     y
pan pan 16 0.5736853980681922    0.7554169353781729
eks pan 31 0.5701563454882129    0.822178550628332
wye wye 32 0.5112738997714514    0.33107563648490446
eks wye 20 0.38245149780530685   0.4730652428100751
wye pan 37 0.056537252420374995  0.5450112991603523
zee pan 30 0.7514525581952406    0.5869901584461873
eks zee 14 0.5207382318405251    0.34141681118811673
zee wye 22 0.9270813051677103    0.5523236165919244
hat wye 34 0.49061881414751796   0.4721354893261027
pan wye 10 0.5026260055412137    0.9526183602969864
zee eks 17 0.29081949506712723   0.054478717073354166
hat zee 18 0.05727869223575699   0.13343527626645157
hat eks 21 0.0023058336158985338 0.16665492414949412
wye hat 24 0.7286126830627567    0.19441962592638418
pan eks 25 0.291444729043585     0.2680100577363237
eks eks 29 0.05713488327208227   0.45012758797367913
hat hat 28 0.5811879718711469    0.3934172489640808
hat pan 39 0.4591095934684415    0.6526252088703994
zee zee 35 0.12565828887119346   0.1936186210637818
pan hat 40 0.30302850095892986   0.2884018711352886
pan zee 38 0.508250895522605     0.12919877119684198

----------------------------------------------------------------
mlr --opprint group-like u/het.dkvp
a
1

a b
2 3

a b c
4 5 6
7 8 9

x  y  z
10 11 12

----------------------------------------------------------------
mlr --opprint group-by a u/medium.dkvp
a   b   i  x                     y
pan pan 1  0.3467901443380824    0.7268028627434533
pan wye 10 0.5026260055412137    0.9526183602969864
pan pan 11 0.7930488423451967    0.6505816637259333
pan pan 16 0.5736853980681922    0.7554169353781729
pan eks 25 0.291444729043585     0.2680100577363237
pan hat 36 0.9436794292675323    0.9111218711707734
pan zee 38 0.508250895522605     0.12919877119684198
pan hat 40 0.30302850095892986   0.2884018711352886
eks pan 2  0.7586799647899636    0.5221511083334797
eks wye 4  0.38139939387114097   0.13418874328430463
eks zee 7  0.6117840605678454    0.1878849191181694
eks pan 13 0.4915175580479536    0.7709126592971468
eks zee 14 0.5207382318405251    0.34141681118811673
eks pan 15 0.07155556372719507   0.3596137145616235
eks wye 20 0.38245149780530685   0.4730652428100751
eks eks 26 0.7433678407354926    0.8295062256195103
eks eks 29 0.05713488327208227   0.45012758797367913
eks pan 31 0.5701563454882129    0.822178550628332
wye wye 3  0.20460330576630303   0.33831852551664776
wye pan 5  0.5732889198020006    0.8636244699032729
wye pan 23 0.7975862089313748    0.8430307846116346
wye hat 24 0.7286126830627567    0.19441962592638418
wye wye 27 0.9439687243972539    0.9305553444632164
wye wye 32 0.5112738997714514    0.33107563648490446
wye pan 37 0.056537252420374995  0.5450112991603523
zee pan 6  0.5271261600918548    0.49322128674835697
zee wye 8  0.5985540091064224    0.976181385699006
zee pan 12 0.3676141320555616    0.23614420670296965
zee eks 17 0.29081949506712723   0.054478717073354166
zee pan 19 0.43144132839222604   0.8442204830496998
zee wye 22 0.9270813051677103    0.5523236165919244
zee pan 30 0.7514525581952406    0.5869901584461873
zee zee 35 0.12565828887119346   0.1936186210637818
hat wye 9  0.03144187646093577   0.7495507603507059
hat zee 18 0.05727869223575699   0.13343527626645157
hat eks 21 0.0023058336158985338 0.16665492414949412
hat hat 28 0.5811879718711469    0.3934172489640808
hat pan 33 0.09303747345405      0.18404048980291832
hat wye 34 0.49061881414751796   0.4721354893261027
hat pan 39 0.4591095934684415    0.6526252088703994

----------------------------------------------------------------
mlr --opprint group-by a,b u/medium.dkvp
a   b   i  x                     y
pan pan 1  0.3467901443380824    0.7268028627434533
pan pan 11 0.7930488423451967    0.6505816637259333
pan pan 16 0.5736853980681922    0.7554169353781729
eks pan 2  0.7586799647899636    0.5221511083334797
eks pan 13 0.4915175580479536    0.7709126592971468
eks pan 15 0.07155556372719507   0.3596137145616235
eks pan 31 0.5701563454882129    0.822178550628332
wye wye 3  0.20460330576630303   0.33831852551664776
wye wye 27 0.9439687243972539    0.9305553444632164
wye wye 32 0.5112738997714514    0.33107563648490446
eks wye 4  0.38139939387114097   0.13418874328430463
eks wye 20 0.38245149780530685   0.4730652428100751
wye pan 5  0.5732889198020006    0.8636244699032729
wye pan 23 0.7975862089313748    0.8430307846116346
wye pan 37 0.056537252420374995  0.5450112991603523
zee pan 6  0.5271261600918548    0.49322128674835697
zee pan 12 0.3676141320555616    0.23614420670296965
zee pan 19 0.43144132839222604   0.8442204830496998
zee pan 30 0.7514525581952406    0.5869901584461873
eks zee 7  0.6117840605678454    0.1878849191181694
eks zee 14 0.5207382318405251    0.34141681118811673
zee wye 8  0.5985540091064224    0.976181385699006
zee wye 22 0.9270813051677103    0.5523236165919244
hat wye 9  0.03144187646093577   0.7495507603507059
hat wye 34 0.49061881414751796   0.4721354893261027
pan wye 10 0.5026260055412137    0.9526183602969864
zee eks 17 0.29081949506712723   0.054478717073354166
hat zee 18 0.05727869223575699   0.13343527626645157
hat eks 21 0.0023058336158985338 0.16665492414949412
wye hat 24 0.7286126830627567    0.19441962592638418
pan eks 25 0.291444729043585     0.2680100577363237
eks eks 26 0.7433678407354926    0.8295062256195103
eks eks 29 0.05713488327208227   0.45012758797367913
hat hat 28 0.5811879718711469    0.3934172489640808
hat pan 33 0.09303747345405      0.18404048980291832
hat pan 39 0.4591095934684415    0.6526252088703994
zee zee 35 0.12565828887119346   0.1936186210637818
pan hat 36 0.9436794292675323    0.9111218711707734
pan hat 40 0.30302850095892986   0.2884018711352886
pan zee 38 0.508250895522605     0.12919877119684198

----------------------------------------------------------------
mlr --opprint rename a,AAA u/s.dkvp
AAA b   i x                   y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint rename a,AAA,x,XXX u/s.dkvp
AAA b   i XXX                 y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint rename none,such u/s.dkvp
a   b   i x                   y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint rename a,b u/s.dkvp
b   i x                   y
pan 1 0.3467901443380824  0.7268028627434533
eks 2 0.7586799647899636  0.5221511083334797
wye 3 0.20460330576630303 0.33831852551664776
eks 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint rename i,j,a,b u/s.dkvp
b   j x                   y
pan 1 0.3467901443380824  0.7268028627434533
eks 2 0.7586799647899636  0.5221511083334797
wye 3 0.20460330576630303 0.33831852551664776
eks 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint rename x,y,a,b u/s.dkvp
b   i y
pan 1 0.3467901443380824
eks 2 0.7586799647899636
wye 3 0.20460330576630303
eks 4 0.38139939387114097

----------------------------------------------------------------
mlr --opprint label A,B,I u/s.dkvp
A   B   I x                   y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint label A,B,I,X,Y u/s.dkvp
A   B   I X                   Y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint label A,B,I,X,Y,Z u/s.dkvp
A   B   I X                   Y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint label b,i,x u/s.dkvp
b   i   x                   y
pan pan 0.3467901443380824  0.7268028627434533
eks pan 0.7586799647899636  0.5221511083334797
wye wye 0.20460330576630303 0.33831852551664776
eks wye 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint label x,i,b u/s.dkvp
x                   i   b y
0.3467901443380824  pan 1 0.7268028627434533
0.7586799647899636  pan 2 0.5221511083334797
0.20460330576630303 wye 3 0.33831852551664776
0.38139939387114097 wye 4 0.13418874328430463

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp sort -f nonesuch
a   b   i x                   y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp sort -f a
a   b   i x                   y
eks pan 2 0.7586799647899636  0.5221511083334797
eks wye 4 0.38139939387114097 0.13418874328430463
pan pan 1 0.3467901443380824  0.7268028627434533
wye wye 3 0.20460330576630303 0.33831852551664776

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp sort -f a,b
a   b   i x                   y
eks pan 2 0.7586799647899636  0.5221511083334797
eks wye 4 0.38139939387114097 0.13418874328430463
pan pan 1 0.3467901443380824  0.7268028627434533
wye wye 3 0.20460330576630303 0.33831852551664776

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp sort -r a
a   b   i x                   y
wye wye 3 0.20460330576630303 0.33831852551664776
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp sort -r a,b
a   b   i x                   y
wye wye 3 0.20460330576630303 0.33831852551664776
pan pan 1 0.3467901443380824  0.7268028627434533
eks wye 4 0.38139939387114097 0.13418874328430463
eks pan 2 0.7586799647899636  0.5221511083334797

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp sort -f a -r b
a   b   i x                   y
eks wye 4 0.38139939387114097 0.13418874328430463
eks pan 2 0.7586799647899636  0.5221511083334797
pan pan 1 0.3467901443380824  0.7268028627434533
wye wye 3 0.20460330576630303 0.33831852551664776

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp sort -f b -n i
a   b   i x                   y
pan pan 1 0.3467901443380824  0.7268028627434533
eks pan 2 0.7586799647899636  0.5221511083334797
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp sort -f b -nr i
a   b   i x                   y
eks pan 2 0.7586799647899636  0.5221511083334797
pan pan 1 0.3467901443380824  0.7268028627434533
eks wye 4 0.38139939387114097 0.13418874328430463
wye wye 3 0.20460330576630303 0.33831852551664776

----------------------------------------------------------------
mlr --json --from u/needs-sorting.json sort-within-records
{
  "a": 1,
  "b": 2
}
{
  "a": 1,
  "b": 2
}
{
  "a": 1,
  "b": 2,
  "c": 3
}

----------------------------------------------------------------
mlr --json --from u/needs-regularize.json regularize
{
  "b": 2,
  "c": 3,
  "a": 1
}
{
  "b": 2,
  "c": 3,
  "a": 1
}
{
  "d": 4,
  "a": 1,
  "b": 2,
  "c": 3
}

----------------------------------------------------------------
mlr --opprint --from u/needs-unsparsify.dkvp unsparsify
a b c
1 - -
1 2 -
1 2 3
1 2 -
1 - -

----------------------------------------------------------------
mlr --opprint --from u/needs-unsparsify.dkvp unsparsify --fill-with X
a b c
1 X X
1 2 X
1 2 3
1 2 X
1 X X

----------------------------------------------------------------
mlr --opprint --from u/medium.dkvp count
count
40

----------------------------------------------------------------
mlr --opprint --from u/medium.dkvp count -g a
a   count
pan 8
eks 10
wye 7
zee 8
hat 7

----------------------------------------------------------------
mlr --opprint --from u/medium.dkvp count -g a,b
a   b   count
pan pan 3
eks pan 4
wye wye 3
eks wye 2
wye pan 3
zee pan 4
eks zee 2
zee wye 2
hat wye 2
pan wye 1
zee eks 1
hat zee 1
hat eks 1
wye hat 1
pan eks 1
eks eks 2
hat hat 1
hat pan 2
zee zee 1
pan hat 2
pan zee 1

----------------------------------------------------------------
mlr --opprint --from u/medium.dkvp count -g a -n
count
5

----------------------------------------------------------------
mlr --opprint --from u/medium.dkvp count -g a,b -n
count
21

----------------------------------------------------------------
mlr --opprint --from u/medium.dkvp count -o NAME
NAME
40

----------------------------------------------------------------
mlr --opprint --from u/medium.dkvp count -g a -o NAME
a   NAME
pan 8
eks 10
wye 7
zee 8
hat 7

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp grep pan
a   b   i x                  y
pan pan 1 0.3467901443380824 0.7268028627434533
eks pan 2 0.7586799647899636 0.5221511083334797

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp grep -v pan
a   b   i x                   y
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp grep PAN

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp grep -i PAN
a   b   i x                  y
pan pan 1 0.3467901443380824 0.7268028627434533
eks pan 2 0.7586799647899636 0.5221511083334797

----------------------------------------------------------------
mlr --opprint --from u/s.dkvp grep -i -v PAN
a   b   i x                   y
wye wye 3 0.20460330576630303 0.33831852551664776
eks wye 4 0.38139939387114097 0.13418874328430463

----------------------------------------------------------------
mlr --from u/s.dkvp skip-trivial-records
a=pan,b=pan,i=1,x=0.3467901443380824,y=0.7268028627434533
a=eks,b=pan,i=2,x=0.7586799647899636,y=0.5221511083334797
a=wye,b=wye,i=3,x=0.20460330576630303,y=0.33831852551664776
a=eks,b=wye,i=4,x=0.38139939387114097,y=0.13418874328430463

----------------------------------------------------------------
mlr --from u/skip-trivial-records.dkvp skip-trivial-records
a=1,b=2
c=4,d=

----------------------------------------------------------------
mlr --inidx --ifs comma altkv


a=b,c=d,e=f

----------------------------------------------------------------
mlr --inidx --ifs comma altkv


a=b,c=d,e=f,4=g

----------------------------------------------------------------
mlr --from u/s.csv --icsv --opprint remove-empty-columns
a   b   i x                   y
eks wye 4 0.38139939387114097 0.13418874328430463
wye wye 3 0.20460330576630303 0.33831852551664776
eks pan 2 0.7586799647899636  0.5221511083334797
pan pan 1 0.3467901443380824  0.7268028627434533

----------------------------------------------------------------
mlr --from u/remove-empty-columns.csv --icsv --opprint cat
a b c  d
- 2 3  4
- 6 -  8
- - 11 12

----------------------------------------------------------------
mlr --from u/remove-empty-columns.csv --icsv --opprint remove-empty-columns
b c  d
- 11 12
6 -  8
2 3  4

----------------------------------------------------------------
mlr --icsv --opprint fill-down -f z u/remove-empty-columns.csv
a b c  d
- 2 3  4
- 6 -  8
- - 11 12

----------------------------------------------------------------
mlr --icsv --opprint fill-down -f a,b,c,d u/remove-empty-columns.csv
a b c  d
- 2 3  4
- 6 3  8
- 6 11 12

----------------------------------------------------------------
mlr --icsv --opprint reorder -f x,i u/s.dkvp
a=pan b=pan i=1 x=0.3467901443380824  y=0.7268028627434533
a=eks b=pan i=2 x=0.7586799647899636  y=0.5221511083334797
a=wye b=wye i=3 x=0.20460330576630303 y=0.33831852551664776
a=eks b=wye i=4 x=0.38139939387114097 y=0.13418874328430463

----------------------------------------------------------------
mlr --icsv --opprint reorder -f x,i -e u/s.dkvp
a=pan b=pan i=1 x=0.3467901443380824  y=0.7268028627434533
a=eks b=pan i=2 x=0.7586799647899636  y=0.5221511083334797
a=wye b=wye i=3 x=0.20460330576630303 y=0.33831852551664776
a=eks b=wye i=4 x=0.38139939387114097 y=0.13418874328430463
