
mlr --opprint put -v begin{@ox=0}; $d=$x-@ox; @ox=$x ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="begin", type=BEGIN:
        text="begin_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="-", type=OPERATOR:
            text="x", type=FIELD_NAME.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="ox", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="ox", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

BLOCKED AST:

BEGIN-BLOCK:
text="begin", type=BEGIN: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="begin_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="ox", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="-", type=OPERATOR:
            text="x", type=FIELD_NAME.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="ox", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="ox", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

a   b   i  x                   y                   d
pan pan 1  0.3467901443380824  0.7268028627434533  0.346790
eks pan 2  0.7586799647899636  0.5221511083334797  0.411890
wye wye 3  0.20460330576630303 0.33831852551664776 -0.554077
eks wye 4  0.38139939387114097 0.13418874328430463 0.176796
wye pan 5  0.5732889198020006  0.8636244699032729  0.191890
zee pan 6  0.5271261600918548  0.49322128674835697 -0.046163
eks zee 7  0.6117840605678454  0.1878849191181694  0.084658
zee wye 8  0.5985540091064224  0.976181385699006   -0.013230
hat wye 9  0.03144187646093577 0.7495507603507059  -0.567112
pan wye 10 0.5026260055412137  0.9526183602969864  0.471184

mlr --opprint put -v begin{@ox="no"}; $d=@ox == "no" ? 1.0 : $x/@ox; @ox=$x then step -a ratio -f x ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="begin", type=BEGIN:
        text="begin_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
                text="no", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="? :", type=OPERATOR:
            text="==", type=OPERATOR:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
                text="no", type=STRING_LITERAL.
            text="1.0", type=NUMERIC_LITERAL.
            text="/", type=OPERATOR:
                text="x", type=FIELD_NAME.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="ox", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

BLOCKED AST:

BEGIN-BLOCK:
text="begin", type=BEGIN: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="begin_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="ox", type=STRING_LITERAL.
            text="no", type=STRING_LITERAL.

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="? :", type=OPERATOR:
            text="==", type=OPERATOR:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
                text="no", type=STRING_LITERAL.
            text="1.0", type=NUMERIC_LITERAL.
            text="/", type=OPERATOR:
                text="x", type=FIELD_NAME.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="ox", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

a   b   i  x                   y                   d         x_ratio
pan pan 1  0.3467901443380824  0.7268028627434533  1.000000  1.000000
eks pan 2  0.7586799647899636  0.5221511083334797  2.187721  2.187721
wye wye 3  0.20460330576630303 0.33831852551664776 0.269683  0.269683
eks wye 4  0.38139939387114097 0.13418874328430463 1.864092  1.864092
wye pan 5  0.5732889198020006  0.8636244699032729  1.503120  1.503120
zee pan 6  0.5271261600918548  0.49322128674835697 0.919477  0.919477
eks zee 7  0.6117840605678454  0.1878849191181694  1.160603  1.160603
zee wye 8  0.5985540091064224  0.976181385699006   0.978375  0.978375
hat wye 9  0.03144187646093577 0.7495507603507059  0.052530  0.052530
pan wye 10 0.5026260055412137  0.9526183602969864  15.985878 15.985878

mlr --opprint put -v $d=$x/@ox; @ox=$x then step -a ratio -f x ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="/", type=OPERATOR:
            text="x", type=FIELD_NAME.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="ox", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="ox", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

BLOCKED AST:

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="/", type=OPERATOR:
            text="x", type=FIELD_NAME.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="ox", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="ox", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

a   b   i  x                   y                   d         x_ratio
pan pan 1  0.3467901443380824  0.7268028627434533  0.346790  1.000000
eks pan 2  0.7586799647899636  0.5221511083334797  2.187721  2.187721
wye wye 3  0.20460330576630303 0.33831852551664776 0.269683  0.269683
eks wye 4  0.38139939387114097 0.13418874328430463 1.864092  1.864092
wye pan 5  0.5732889198020006  0.8636244699032729  1.503120  1.503120
zee pan 6  0.5271261600918548  0.49322128674835697 0.919477  0.919477
eks zee 7  0.6117840605678454  0.1878849191181694  1.160603  1.160603
zee wye 8  0.5985540091064224  0.976181385699006   0.978375  0.978375
hat wye 9  0.03144187646093577 0.7495507603507059  0.052530  0.052530
pan wye 10 0.5026260055412137  0.9526183602969864  15.985878 15.985878

mlr --opprint put -v begin{@ox="no"}; $d=@ox == "no" ? 1.0 : $x/@ox; @ox=$x then step -a ratio -f x ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="begin", type=BEGIN:
        text="begin_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
                text="no", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="? :", type=OPERATOR:
            text="==", type=OPERATOR:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
                text="no", type=STRING_LITERAL.
            text="1.0", type=NUMERIC_LITERAL.
            text="/", type=OPERATOR:
                text="x", type=FIELD_NAME.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="ox", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

BLOCKED AST:

BEGIN-BLOCK:
text="begin", type=BEGIN: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="begin_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="ox", type=STRING_LITERAL.
            text="no", type=STRING_LITERAL.

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="? :", type=OPERATOR:
            text="==", type=OPERATOR:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
                text="no", type=STRING_LITERAL.
            text="1.0", type=NUMERIC_LITERAL.
            text="/", type=OPERATOR:
                text="x", type=FIELD_NAME.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="ox", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

a   b   i  x                   y                   d         x_ratio
pan pan 1  0.3467901443380824  0.7268028627434533  1.000000  1.000000
eks pan 2  0.7586799647899636  0.5221511083334797  2.187721  2.187721
wye wye 3  0.20460330576630303 0.33831852551664776 0.269683  0.269683
eks wye 4  0.38139939387114097 0.13418874328430463 1.864092  1.864092
wye pan 5  0.5732889198020006  0.8636244699032729  1.503120  1.503120
zee pan 6  0.5271261600918548  0.49322128674835697 0.919477  0.919477
eks zee 7  0.6117840605678454  0.1878849191181694  1.160603  1.160603
zee wye 8  0.5985540091064224  0.976181385699006   0.978375  0.978375
hat wye 9  0.03144187646093577 0.7495507603507059  0.052530  0.052530
pan wye 10 0.5026260055412137  0.9526183602969864  15.985878 15.985878

mlr --opprint put -v begin{@rsum = 0}; @rsum = @rsum + $x; $rsum = @rsum ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="begin", type=BEGIN:
        text="begin_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="rsum", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="rsum", type=STRING_LITERAL.
        text="+", type=OPERATOR:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="rsum", type=STRING_LITERAL.
            text="x", type=FIELD_NAME.
    text="=", type=SREC_ASSIGNMENT:
        text="rsum", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="rsum", type=STRING_LITERAL.

BLOCKED AST:

BEGIN-BLOCK:
text="begin", type=BEGIN: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="begin_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="rsum", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="rsum", type=STRING_LITERAL.
        text="+", type=OPERATOR:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="rsum", type=STRING_LITERAL.
            text="x", type=FIELD_NAME.
    text="=", type=SREC_ASSIGNMENT:
        text="rsum", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="rsum", type=STRING_LITERAL.

a   b   i  x                   y                   rsum
pan pan 1  0.3467901443380824  0.7268028627434533  0.346790
eks pan 2  0.7586799647899636  0.5221511083334797  1.105470
wye wye 3  0.20460330576630303 0.33831852551664776 1.310073
eks wye 4  0.38139939387114097 0.13418874328430463 1.691473
wye pan 5  0.5732889198020006  0.8636244699032729  2.264762
zee pan 6  0.5271261600918548  0.49322128674835697 2.791888
eks zee 7  0.6117840605678454  0.1878849191181694  3.403672
zee wye 8  0.5985540091064224  0.976181385699006   4.002226
hat wye 9  0.03144187646093577 0.7495507603507059  4.033668
pan wye 10 0.5026260055412137  0.9526183602969864  4.536294

mlr --opprint put -v begin{@a=0; @b=0; @c=0}; $za=@a; $zb=@b; $zc=@c; $d=@a+@b+@c; @a=@b; @b=@c; @c=$i ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="begin", type=BEGIN:
        text="begin_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="a", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="b", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="c", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="za", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="zb", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="zc", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="+", type=OPERATOR:
            text="+", type=OPERATOR:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="a", type=STRING_LITERAL.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="b", type=STRING_LITERAL.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="c", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
        text="i", type=FIELD_NAME.

BLOCKED AST:

BEGIN-BLOCK:
text="begin", type=BEGIN: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="begin_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="a", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="b", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="c", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=SREC_ASSIGNMENT:
        text="za", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="zb", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="zc", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="+", type=OPERATOR:
            text="+", type=OPERATOR:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="a", type=STRING_LITERAL.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="b", type=STRING_LITERAL.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="c", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
        text="i", type=FIELD_NAME.

a   b   i  x                   y                   za zb zc d
pan pan 1  0.3467901443380824  0.7268028627434533  0  0  0  0
eks pan 2  0.7586799647899636  0.5221511083334797  0  0  1  1
wye wye 3  0.20460330576630303 0.33831852551664776 0  1  2  3
eks wye 4  0.38139939387114097 0.13418874328430463 1  2  3  6
wye pan 5  0.5732889198020006  0.8636244699032729  2  3  4  9
zee pan 6  0.5271261600918548  0.49322128674835697 3  4  5  12
eks zee 7  0.6117840605678454  0.1878849191181694  4  5  6  15
zee wye 8  0.5985540091064224  0.976181385699006   5  6  7  18
hat wye 9  0.03144187646093577 0.7495507603507059  6  7  8  21
pan wye 10 0.5026260055412137  0.9526183602969864  7  8  9  24

mlr --opprint put -v begin {@a=0; @b=0; @c=0}; $za=@a; $zb=@b; $zc=@c; $d=@a+@b+@c; @a=@b; @b=@c; @c=$i ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="begin", type=BEGIN:
        text="begin_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="a", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="b", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="c", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="za", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="zb", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="zc", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="+", type=OPERATOR:
            text="+", type=OPERATOR:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="a", type=STRING_LITERAL.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="b", type=STRING_LITERAL.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="c", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
        text="i", type=FIELD_NAME.

BLOCKED AST:

BEGIN-BLOCK:
text="begin", type=BEGIN: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="begin_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="a", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="b", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="c", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=SREC_ASSIGNMENT:
        text="za", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="zb", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="zc", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="+", type=OPERATOR:
            text="+", type=OPERATOR:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="a", type=STRING_LITERAL.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="b", type=STRING_LITERAL.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="c", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
        text="i", type=FIELD_NAME.

a   b   i  x                   y                   za zb zc d
pan pan 1  0.3467901443380824  0.7268028627434533  0  0  0  0
eks pan 2  0.7586799647899636  0.5221511083334797  0  0  1  1
wye wye 3  0.20460330576630303 0.33831852551664776 0  1  2  3
eks wye 4  0.38139939387114097 0.13418874328430463 1  2  3  6
wye pan 5  0.5732889198020006  0.8636244699032729  2  3  4  9
zee pan 6  0.5271261600918548  0.49322128674835697 3  4  5  12
eks zee 7  0.6117840605678454  0.1878849191181694  4  5  6  15
zee wye 8  0.5985540091064224  0.976181385699006   5  6  7  18
hat wye 9  0.03144187646093577 0.7495507603507059  6  7  8  21
pan wye 10 0.5026260055412137  0.9526183602969864  7  8  9  24

mlr --opprint put -v begin{@ox=0}; $d=$x-@ox; @ox=$x ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="begin", type=BEGIN:
        text="begin_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="ox", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="-", type=OPERATOR:
            text="x", type=FIELD_NAME.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="ox", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="ox", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

BLOCKED AST:

BEGIN-BLOCK:
text="begin", type=BEGIN: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="begin_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="ox", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=SREC_ASSIGNMENT:
        text="d", type=FIELD_NAME.
        text="-", type=OPERATOR:
            text="x", type=FIELD_NAME.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="ox", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="ox", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

a   b   i  x                   y                   d
pan pan 1  0.3467901443380824  0.7268028627434533  0.346790
eks pan 2  0.7586799647899636  0.5221511083334797  0.411890
wye wye 3  0.20460330576630303 0.33831852551664776 -0.554077
eks wye 4  0.38139939387114097 0.13418874328430463 0.176796
wye pan 5  0.5732889198020006  0.8636244699032729  0.191890
zee pan 6  0.5271261600918548  0.49322128674835697 -0.046163
eks zee 7  0.6117840605678454  0.1878849191181694  0.084658
zee wye 8  0.5985540091064224  0.976181385699006   -0.013230
hat wye 9  0.03144187646093577 0.7495507603507059  -0.567112
pan wye 10 0.5026260055412137  0.9526183602969864  0.471184

mlr put -v @a=$a; @b=$b; @c=$x; end {emitf @a; emitf @b; emitf @c} ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
        text="a", type=FIELD_NAME.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
        text="b", type=FIELD_NAME.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.
    text="end", type=END:
        text="end_block", type=STATEMENT_BLOCK:
            text="emitf", type=EMITF:
                text="emitf", type=EMITF:
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="a", type=STRING_LITERAL.
                text="stream", type=STREAM:
            text="emitf", type=EMITF:
                text="emitf", type=EMITF:
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="b", type=STRING_LITERAL.
                text="stream", type=STREAM:
            text="emitf", type=EMITF:
                text="emitf", type=EMITF:
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="c", type=STRING_LITERAL.
                text="stream", type=STREAM:

BLOCKED AST:

END-BLOCK:
text="end", type=END: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="end_block", type=STATEMENT_BLOCK:
        text="emitf", type=EMITF:
            text="emitf", type=EMITF:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="a", type=STRING_LITERAL.
            text="stream", type=STREAM:
        text="emitf", type=EMITF:
            text="emitf", type=EMITF:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="b", type=STRING_LITERAL.
            text="stream", type=STREAM:
        text="emitf", type=EMITF:
            text="emitf", type=EMITF:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="c", type=STRING_LITERAL.
            text="stream", type=STREAM:

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
        text="a", type=FIELD_NAME.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
        text="b", type=FIELD_NAME.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

a=pan,b=pan,i=1,x=0.3467901443380824,y=0.7268028627434533
a=eks,b=pan,i=2,x=0.7586799647899636,y=0.5221511083334797
a=wye,b=wye,i=3,x=0.20460330576630303,y=0.33831852551664776
a=eks,b=wye,i=4,x=0.38139939387114097,y=0.13418874328430463
a=wye,b=pan,i=5,x=0.5732889198020006,y=0.8636244699032729
a=zee,b=pan,i=6,x=0.5271261600918548,y=0.49322128674835697
a=eks,b=zee,i=7,x=0.6117840605678454,y=0.1878849191181694
a=zee,b=wye,i=8,x=0.5985540091064224,y=0.976181385699006
a=hat,b=wye,i=9,x=0.03144187646093577,y=0.7495507603507059
a=pan,b=wye,i=10,x=0.5026260055412137,y=0.9526183602969864
a=pan
b=wye
c=0.502626

mlr put -v @a=$a; @b=$b; @c=$x; end{emitf @a, @b, @c} ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
        text="a", type=FIELD_NAME.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
        text="b", type=FIELD_NAME.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.
    text="end", type=END:
        text="end_block", type=STATEMENT_BLOCK:
            text="emitf", type=EMITF:
                text="emitf", type=EMITF:
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="a", type=STRING_LITERAL.
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="b", type=STRING_LITERAL.
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="c", type=STRING_LITERAL.
                text="stream", type=STREAM:

BLOCKED AST:

END-BLOCK:
text="end", type=END: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="end_block", type=STATEMENT_BLOCK:
        text="emitf", type=EMITF:
            text="emitf", type=EMITF:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="a", type=STRING_LITERAL.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="b", type=STRING_LITERAL.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="c", type=STRING_LITERAL.
            text="stream", type=STREAM:

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="a", type=STRING_LITERAL.
        text="a", type=FIELD_NAME.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="b", type=STRING_LITERAL.
        text="b", type=FIELD_NAME.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="c", type=STRING_LITERAL.
        text="x", type=FIELD_NAME.

a=pan,b=pan,i=1,x=0.3467901443380824,y=0.7268028627434533
a=eks,b=pan,i=2,x=0.7586799647899636,y=0.5221511083334797
a=wye,b=wye,i=3,x=0.20460330576630303,y=0.33831852551664776
a=eks,b=wye,i=4,x=0.38139939387114097,y=0.13418874328430463
a=wye,b=pan,i=5,x=0.5732889198020006,y=0.8636244699032729
a=zee,b=pan,i=6,x=0.5271261600918548,y=0.49322128674835697
a=eks,b=zee,i=7,x=0.6117840605678454,y=0.1878849191181694
a=zee,b=wye,i=8,x=0.5985540091064224,y=0.976181385699006
a=hat,b=wye,i=9,x=0.03144187646093577,y=0.7495507603507059
a=pan,b=wye,i=10,x=0.5026260055412137,y=0.9526183602969864
a=pan,b=wye,c=0.502626

mlr --opprint put -v begin {@count=0; @sum=0.0}; @count=@count+1; @sum=@sum+$x; end{@mean=@sum/@count; emitf @mean} ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="begin", type=BEGIN:
        text="begin_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="count", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="sum", type=STRING_LITERAL.
                text="0.0", type=NUMERIC_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="count", type=STRING_LITERAL.
        text="+", type=OPERATOR:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="count", type=STRING_LITERAL.
            text="1", type=NUMERIC_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="sum", type=STRING_LITERAL.
        text="+", type=OPERATOR:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="sum", type=STRING_LITERAL.
            text="x", type=FIELD_NAME.
    text="end", type=END:
        text="end_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="mean", type=STRING_LITERAL.
                text="/", type=OPERATOR:
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="sum", type=STRING_LITERAL.
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="count", type=STRING_LITERAL.
            text="emitf", type=EMITF:
                text="emitf", type=EMITF:
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="mean", type=STRING_LITERAL.
                text="stream", type=STREAM:

BLOCKED AST:

BEGIN-BLOCK:
text="begin", type=BEGIN: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="begin_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="count", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="sum", type=STRING_LITERAL.
            text="0.0", type=NUMERIC_LITERAL.

END-BLOCK:
text="end", type=END: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="end_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="mean", type=STRING_LITERAL.
            text="/", type=OPERATOR:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="sum", type=STRING_LITERAL.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="count", type=STRING_LITERAL.
        text="emitf", type=EMITF:
            text="emitf", type=EMITF:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="mean", type=STRING_LITERAL.
            text="stream", type=STREAM:

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="count", type=STRING_LITERAL.
        text="+", type=OPERATOR:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="count", type=STRING_LITERAL.
            text="1", type=NUMERIC_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="sum", type=STRING_LITERAL.
        text="+", type=OPERATOR:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="sum", type=STRING_LITERAL.
            text="x", type=FIELD_NAME.

a   b   i  x                   y
pan pan 1  0.3467901443380824  0.7268028627434533
eks pan 2  0.7586799647899636  0.5221511083334797
wye wye 3  0.20460330576630303 0.33831852551664776
eks wye 4  0.38139939387114097 0.13418874328430463
wye pan 5  0.5732889198020006  0.8636244699032729
zee pan 6  0.5271261600918548  0.49322128674835697
eks zee 7  0.6117840605678454  0.1878849191181694
zee wye 8  0.5985540091064224  0.976181385699006
hat wye 9  0.03144187646093577 0.7495507603507059
pan wye 10 0.5026260055412137  0.9526183602969864

mean
0.453629

mlr --opprint put -v end{@mean=@sum/@count; emitf @mean}; begin {@count=0; @sum=0.0}; @count=@count+1; @sum=@sum+$x ./reg_test/input/abixy
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="end", type=END:
        text="end_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="mean", type=STRING_LITERAL.
                text="/", type=OPERATOR:
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="sum", type=STRING_LITERAL.
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="count", type=STRING_LITERAL.
            text="emitf", type=EMITF:
                text="emitf", type=EMITF:
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="mean", type=STRING_LITERAL.
                text="stream", type=STREAM:
    text="begin", type=BEGIN:
        text="begin_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="count", type=STRING_LITERAL.
                text="0", type=NUMERIC_LITERAL.
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="sum", type=STRING_LITERAL.
                text="0.0", type=NUMERIC_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="count", type=STRING_LITERAL.
        text="+", type=OPERATOR:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="count", type=STRING_LITERAL.
            text="1", type=NUMERIC_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="sum", type=STRING_LITERAL.
        text="+", type=OPERATOR:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="sum", type=STRING_LITERAL.
            text="x", type=FIELD_NAME.

BLOCKED AST:

BEGIN-BLOCK:
text="begin", type=BEGIN: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="begin_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="count", type=STRING_LITERAL.
            text="0", type=NUMERIC_LITERAL.
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="sum", type=STRING_LITERAL.
            text="0.0", type=NUMERIC_LITERAL.

END-BLOCK:
text="end", type=END: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="end_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="mean", type=STRING_LITERAL.
            text="/", type=OPERATOR:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="sum", type=STRING_LITERAL.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="count", type=STRING_LITERAL.
        text="emitf", type=EMITF:
            text="emitf", type=EMITF:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="mean", type=STRING_LITERAL.
            text="stream", type=STREAM:

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="count", type=STRING_LITERAL.
        text="+", type=OPERATOR:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="count", type=STRING_LITERAL.
            text="1", type=NUMERIC_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="sum", type=STRING_LITERAL.
        text="+", type=OPERATOR:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="sum", type=STRING_LITERAL.
            text="x", type=FIELD_NAME.

a   b   i  x                   y
pan pan 1  0.3467901443380824  0.7268028627434533
eks pan 2  0.7586799647899636  0.5221511083334797
wye wye 3  0.20460330576630303 0.33831852551664776
eks wye 4  0.38139939387114097 0.13418874328430463
wye pan 5  0.5732889198020006  0.8636244699032729
zee pan 6  0.5271261600918548  0.49322128674835697
eks zee 7  0.6117840605678454  0.1878849191181694
zee wye 8  0.5985540091064224  0.976181385699006
hat wye 9  0.03144187646093577 0.7495507603507059
pan wye 10 0.5026260055412137  0.9526183602969864

mean
0.453629

mlr put -v begin{ @a = @b[1] }; $c = @d; @e[$i][2+$j][3] = $4; end{@f[@g[5][@h]] = 6} /dev/null
RAW AST:

AST ROOT:
text="block", type=STATEMENT_BLOCK:
    text="begin", type=BEGIN:
        text="begin_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="a", type=STRING_LITERAL.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="b", type=STRING_LITERAL.
                    text="1", type=NUMERIC_LITERAL.
    text="=", type=SREC_ASSIGNMENT:
        text="c", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="d", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="e", type=STRING_LITERAL.
            text="i", type=FIELD_NAME.
            text="+", type=OPERATOR:
                text="2", type=NUMERIC_LITERAL.
                text="j", type=FIELD_NAME.
            text="3", type=NUMERIC_LITERAL.
        text="4", type=FIELD_NAME.
    text="end", type=END:
        text="end_block", type=STATEMENT_BLOCK:
            text="=", type=OOSVAR_ASSIGNMENT:
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="f", type=STRING_LITERAL.
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="g", type=STRING_LITERAL.
                        text="5", type=NUMERIC_LITERAL.
                        text="oosvar_keylist", type=OOSVAR_KEYLIST:
                            text="h", type=STRING_LITERAL.
                text="6", type=NUMERIC_LITERAL.

BLOCKED AST:

BEGIN-BLOCK:
text="begin", type=BEGIN: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="begin_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="a", type=STRING_LITERAL.
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="b", type=STRING_LITERAL.
                text="1", type=NUMERIC_LITERAL.

END-BLOCK:
text="end", type=END: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="end_block", type=STATEMENT_BLOCK:
        text="=", type=OOSVAR_ASSIGNMENT:
            text="oosvar_keylist", type=OOSVAR_KEYLIST:
                text="f", type=STRING_LITERAL.
                text="oosvar_keylist", type=OOSVAR_KEYLIST:
                    text="g", type=STRING_LITERAL.
                    text="5", type=NUMERIC_LITERAL.
                    text="oosvar_keylist", type=OOSVAR_KEYLIST:
                        text="h", type=STRING_LITERAL.
            text="6", type=NUMERIC_LITERAL.

MAIN BLOCK:
text="main_block", type=STATEMENT_BLOCK: subframe_var_count=1 max_subframe_depth=1 max_var_depth=1
    text="=", type=SREC_ASSIGNMENT:
        text="c", type=FIELD_NAME.
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="d", type=STRING_LITERAL.
    text="=", type=OOSVAR_ASSIGNMENT:
        text="oosvar_keylist", type=OOSVAR_KEYLIST:
            text="e", type=STRING_LITERAL.
            text="i", type=FIELD_NAME.
            text="+", type=OPERATOR:
                text="2", type=NUMERIC_LITERAL.
                text="j", type=FIELD_NAME.
            text="3", type=NUMERIC_LITERAL.
        text="4", type=FIELD_NAME.


mlr put @y[$a]=$y; end{dump} ./reg_test/input/abixy
a=pan,b=pan,i=1,x=0.3467901443380824,y=0.7268028627434533
a=eks,b=pan,i=2,x=0.7586799647899636,y=0.5221511083334797
a=wye,b=wye,i=3,x=0.20460330576630303,y=0.33831852551664776
a=eks,b=wye,i=4,x=0.38139939387114097,y=0.13418874328430463
a=wye,b=pan,i=5,x=0.5732889198020006,y=0.8636244699032729
a=zee,b=pan,i=6,x=0.5271261600918548,y=0.49322128674835697
a=eks,b=zee,i=7,x=0.6117840605678454,y=0.1878849191181694
a=zee,b=wye,i=8,x=0.5985540091064224,y=0.976181385699006
a=hat,b=wye,i=9,x=0.03144187646093577,y=0.7495507603507059
a=pan,b=wye,i=10,x=0.5026260055412137,y=0.9526183602969864
{
  "y": {
    "pan": 0.952618,
    "eks": 0.187885,
    "wye": 0.863624,
    "zee": 0.976181,
    "hat": 0.749551
  }
}

mlr stats1 -a sum -f y -g a ./reg_test/input/abixy
a=pan,y_sum=1.679421
a=eks,y_sum=0.844225
a=wye,y_sum=1.201943
a=zee,y_sum=1.469403
a=hat,y_sum=0.749551

mlr put @y_sum[$a] = $y; end{dump} ./reg_test/input/abixy
a=pan,b=pan,i=1,x=0.3467901443380824,y=0.7268028627434533
a=eks,b=pan,i=2,x=0.7586799647899636,y=0.5221511083334797
a=wye,b=wye,i=3,x=0.20460330576630303,y=0.33831852551664776
a=eks,b=wye,i=4,x=0.38139939387114097,y=0.13418874328430463
a=wye,b=pan,i=5,x=0.5732889198020006,y=0.8636244699032729
a=zee,b=pan,i=6,x=0.5271261600918548,y=0.49322128674835697
a=eks,b=zee,i=7,x=0.6117840605678454,y=0.1878849191181694
a=zee,b=wye,i=8,x=0.5985540091064224,y=0.976181385699006
a=hat,b=wye,i=9,x=0.03144187646093577,y=0.7495507603507059
a=pan,b=wye,i=10,x=0.5026260055412137,y=0.9526183602969864
{
  "y_sum": {
    "pan": 0.952618,
    "eks": 0.187885,
    "wye": 0.863624,
    "zee": 0.976181,
    "hat": 0.749551
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @s      ; dump} ./reg_test/input/unset1.dkvp
{
  "s": 9,
  "t": {
    "1": 9
  },
  "u": {
    "1": {
      "2": 9
    }
  }
}
{
  "t": {
    "1": 9
  },
  "u": {
    "1": {
      "2": 9
    }
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @t      ; dump} ./reg_test/input/unset1.dkvp
{
  "s": 9,
  "t": {
    "1": 9
  },
  "u": {
    "1": {
      "2": 9
    }
  }
}
{
  "s": 9,
  "u": {
    "1": {
      "2": 9
    }
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @t[1]   ; dump} ./reg_test/input/unset1.dkvp
{
  "s": 9,
  "t": {
    "1": 9
  },
  "u": {
    "1": {
      "2": 9
    }
  }
}
{
  "s": 9,
  "t": {
  },
  "u": {
    "1": {
      "2": 9
    }
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @u      ; dump} ./reg_test/input/unset1.dkvp
{
  "s": 9,
  "t": {
    "1": 9
  },
  "u": {
    "1": {
      "2": 9
    }
  }
}
{
  "s": 9,
  "t": {
    "1": 9
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @u[1]   ; dump} ./reg_test/input/unset1.dkvp
{
  "s": 9,
  "t": {
    "1": 9
  },
  "u": {
    "1": {
      "2": 9
    }
  }
}
{
  "s": 9,
  "t": {
    "1": 9
  },
  "u": {
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @u[1][2]; dump} ./reg_test/input/unset1.dkvp
{
  "s": 9,
  "t": {
    "1": 9
  },
  "u": {
    "1": {
      "2": 9
    }
  }
}
{
  "s": 9,
  "t": {
    "1": 9
  },
  "u": {
    "1": {
    }
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @s      ; dump} ./reg_test/input/unset4.dkvp
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}
{
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @t      ; dump} ./reg_test/input/unset4.dkvp
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}
{
  "s": 9,
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @t[1]   ; dump} ./reg_test/input/unset4.dkvp
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}
{
  "s": 9,
  "t": {
    "4": 9
  },
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @u      ; dump} ./reg_test/input/unset4.dkvp
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @u[1]   ; dump} ./reg_test/input/unset4.dkvp
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "4": {
      "5": 9,
      "6": 9
    }
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @u[1][2]; dump} ./reg_test/input/unset4.dkvp
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "1": {
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset all;      dump} ./reg_test/input/unset4.dkvp
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}
{
}

mlr put -q @s=$x; @t[$a]=$x; @u[$a][$b]=$x; end{dump; unset @*;       dump} ./reg_test/input/unset4.dkvp
{
  "s": 9,
  "t": {
    "1": 9,
    "4": 9
  },
  "u": {
    "1": {
      "2": 9,
      "3": 9
    },
    "4": {
      "5": 9,
      "6": 9
    }
  }
}
{
}

mlr put unset $x ./reg_test/input/unset4.dkvp
a=1,b=2
a=1,b=3
a=4,b=5
a=4,b=6

mlr put unset $*; $aaa = 999 ./reg_test/input/unset4.dkvp
aaa=999
aaa=999
aaa=999
aaa=999

mlr --from ./reg_test/input/abixy put x = 1; print "OX=".x; unset x; print "NX=".x
OX=1
NX=
a=pan,b=pan,i=1,x=0.3467901443380824,y=0.7268028627434533
OX=1
NX=
a=eks,b=pan,i=2,x=0.7586799647899636,y=0.5221511083334797
OX=1
NX=
a=wye,b=wye,i=3,x=0.20460330576630303,y=0.33831852551664776
OX=1
NX=
a=eks,b=wye,i=4,x=0.38139939387114097,y=0.13418874328430463
OX=1
NX=
a=wye,b=pan,i=5,x=0.5732889198020006,y=0.8636244699032729
OX=1
NX=
a=zee,b=pan,i=6,x=0.5271261600918548,y=0.49322128674835697
OX=1
NX=
a=eks,b=zee,i=7,x=0.6117840605678454,y=0.1878849191181694
OX=1
NX=
a=zee,b=wye,i=8,x=0.5985540091064224,y=0.976181385699006
OX=1
NX=
a=hat,b=wye,i=9,x=0.03144187646093577,y=0.7495507603507059
OX=1
NX=
a=pan,b=wye,i=10,x=0.5026260055412137,y=0.9526183602969864

mlr put -q @{variable.name} += $x; end{emit @{variable.name}} ./reg_test/input/abixy
variable.name=4.536294

mlr put -q @{variable.name}[$a] += $x; end{emit @{variable.name},"a"} ./reg_test/input/abixy
a=pan,variable.name=0.849416
a=eks,variable.name=1.751863
a=wye,variable.name=0.777892
a=zee,variable.name=1.125680
a=hat,variable.name=0.031442

mlr put for (k,v in $*) { if (k == "i") {unset $[k]}} ./reg_test/input/abixy
a=pan,b=pan,x=0.3467901443380824,y=0.7268028627434533
a=eks,b=pan,x=0.7586799647899636,y=0.5221511083334797
a=wye,b=wye,x=0.20460330576630303,y=0.33831852551664776
a=eks,b=wye,x=0.38139939387114097,y=0.13418874328430463
a=wye,b=pan,x=0.5732889198020006,y=0.8636244699032729
a=zee,b=pan,x=0.5271261600918548,y=0.49322128674835697
a=eks,b=zee,x=0.6117840605678454,y=0.1878849191181694
a=zee,b=wye,x=0.5985540091064224,y=0.976181385699006
a=hat,b=wye,x=0.03144187646093577,y=0.7495507603507059
a=pan,b=wye,x=0.5026260055412137,y=0.9526183602969864

mlr --opprint --from ./reg_test/input/abixy put -q 
  @output[NR] = $*;
  end {
    for ((nr, k), v in @output) {
      if (nr == 4 || k == "i") {
        unset @output[nr][k]
      }
    }
    emitp @output, "NR", "k"
  }

NR k output
1  a pan
1  b pan
1  x 0.3467901443380824
1  y 0.7268028627434533
2  a eks
2  b pan
2  x 0.7586799647899636
2  y 0.5221511083334797
3  a wye
3  b wye
3  x 0.20460330576630303
3  y 0.33831852551664776
5  a wye
5  b pan
5  x 0.5732889198020006
5  y 0.8636244699032729
6  a zee
6  b pan
6  x 0.5271261600918548
6  y 0.49322128674835697
7  a eks
7  b zee
7  x 0.6117840605678454
7  y 0.1878849191181694
8  a zee
8  b wye
8  x 0.5985540091064224
8  y 0.976181385699006
9  a hat
9  b wye
9  x 0.03144187646093577
9  y 0.7495507603507059
10 a pan
10 b wye
10 x 0.5026260055412137
10 y 0.9526183602969864

